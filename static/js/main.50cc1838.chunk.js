(window.webpackJsonpcrudapp=window.webpackJsonpcrudapp||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),c=a.n(r),i=(a(39),a(33)),s=a(13),o=a(5),m=a(6),d=a(8),p=a(7),h=a(9),u=(a(40),a(2));var E=function(){return l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper blue-grey z-depth-0"},l.a.createElement("div",{className:"container"},l.a.createElement(u.b,{to:"/",className:"brand-logo hide-on-med-and-down"}," ",l.a.createElement("i",{className:"material-icons home-icon"},"home")," "),l.a.createElement("ul",{id:"nav",className:"right"},l.a.createElement("li",null,l.a.createElement(u.b,{to:"/"},"My listings")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/create"},"Create listing")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/manage"},"Manage"))))))},v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"col s12 m6 l6"},l.a.createElement("div",{className:"card horizontal hoverable"},l.a.createElement("div",{className:"card-stacked"},l.a.createElement("div",{className:"card-content"},l.a.createElement("ul",{className:"listing"},l.a.createElement("li",null,l.a.createElement("i",{className:"material-icons left"}," location_city ")," ",l.a.createElement("b",null,"  ",this.props.home.city," ")),l.a.createElement("li",null,l.a.createElement("i",{className:"material-icons left"}," location_on "),l.a.createElement("b",null,this.props.home.street," ",this.props.home.property," ",this.props.home.apartment?"/ ".concat(this.props.home.apartment):null)),l.a.createElement("li",null,l.a.createElement("i",{className:"material-icons left"}," local_atm "),this.props.home.price)),l.a.createElement("p",null,l.a.createElement("i",{className:"material-icons left"}," info ")," ",this.props.home.description," ")),l.a.createElement("div",{className:"card-action center-align red-text"},l.a.createElement(u.b,{to:"edit/".concat(this.props.homeid),className:"btn-small"}," ",l.a.createElement("i",{className:"material-icons right"},"edit")," Edit ")))))}}]),t}(l.a.Component);var g=function(e){return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("i",{className:"material-icons prefix"},"search"),l.a.createElement("input",{id:"search",type:"text",className:"validate",onChange:e.handleSearch,value:e.filterby}),l.a.createElement("label",{htmlFor:"search"},"Search")))))},f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSearch=function(e){a.setState({filterby:e.target.value})},a.state={filterby:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.listings;if(this.props.listings){var a=this.state.filterby.toUpperCase();t=this.props.listings.filter((function(e){return String(Object.values(e)).toUpperCase().includes(a)}))}return this.props.listings?l.a.createElement("div",{className:"container"},l.a.createElement(g,{handleSearch:this.handleSearch,filterby:this.state.filterby}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 m12"},t.map((function(t){return l.a.createElement(v,{key:t.id?"home-".concat(t.id):"home-".concat(parseInt(e.props.lastid)+1),home:t,delete:e.deleteListing,homeid:t.id?t.id:parseInt(e.props.lastid)+1})}))))):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"spinner-layer spinner-red"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))}}]),t}(l.a.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){e.preventDefault(),a.setState(Object(s.a)({},e.target.id,e.target.value))},a.state={city:"",description:"",price:"",property:"",street:"",type:"",apartment:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 m12 l12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("span",{className:"card-title"},"Create new listing"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("i",{className:"material-icons prefix"},"location_city"),l.a.createElement("input",{id:"city",type:"text",className:"validate",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"city"},"City")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6 m6 l6"},l.a.createElement("i",{className:"material-icons prefix"},"location_on"),l.a.createElement("input",{id:"street",type:"text",className:"validate",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"street"},"Street")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{id:"property",type:"number",className:"validate",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"property",className:"hide-on-small-only"},"Property")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{id:"apartment",type:"number",className:"validate",size:"3",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"apartment",className:"hide-on-small-only"},"Apartment"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"local_atm"),l.a.createElement("input",{id:"price",type:"number",className:"validate",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"price"},"Price")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("i",{className:"material-icons prefix"},"line_weight"),l.a.createElement("input",{id:"type",type:"number",className:"validate",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"type"},"Type")))),l.a.createElement("div",{className:"input-field"},l.a.createElement("i",{className:"material-icons prefix"},"info"),l.a.createElement("textarea",{id:"description",className:"materialize-textarea",value:this.state.value,onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"description"},"Description")),l.a.createElement(u.b,{to:"/",className:"btn-floating btn-large red lighten-2 pulse right",onClick:function(){return e.props.handleCreation(e.state)}},l.a.createElement("i",{className:"material-icons"},"add")))))))}}]),t}(l.a.Component),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).deleteAll=function(){try{fetch("https://alfa.propertygrouppoland.pl/q/paulinaopacka/deleteAll",{method:"DELETE"}).then((function(e){return console.log(e)}))}catch(e){console.error(e)}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 m12 l12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-content center-align"},l.a.createElement("span",{className:"card-title center-align"},"Manage your listings"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"card red lighten-3"},l.a.createElement("div",{className:"card-content white-text"},l.a.createElement("span",{className:"card-title"}," ",l.a.createElement("i",{className:"material-icons left"},"error"),"Danger zone"),l.a.createElement("p",null,"Click the button below to DELETE all your listings.")),l.a.createElement("div",{className:"card-action"},l.a.createElement(u.b,{to:"/",className:"waves-effect waves-light btn-large red",onClick:this.deleteAll},l.a.createElement("i",{className:"material-icons left"},"error"),"DELETE ALL")))))))))))}}]),t}(l.a.Component),y=a(16),O=a.n(y);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){e.preventDefault();var t=a.state.listing;a.setState({listing:C({},t,Object(s.a)({},e.target.id,e.target.value))})},a.saveChanges=function(e,t){a.props.editListing(e,t),a.props.history.push("/")},a.handleDelete=function(e){a.props.deleteListing(e),a.props.history.push("/")},a.state={homeid:a.props.match.params.home_id,listing:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.get("https://alfa.propertygrouppoland.pl/q/paulinaopacka/get/".concat(this.state.homeid)).then((function(t){var a=t.data.data;e.setState({listing:a})}))}},{key:"render",value:function(){var e=this;return this.state.listing?l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"col s12 m6 l6"},l.a.createElement("div",{className:"card horizontal"},l.a.createElement("div",{className:"card-stacked"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("i",{className:"material-icons prefix"},"location_city"),l.a.createElement("input",{id:"city",type:"text",value:this.state.listing.city,onChange:this.handleChange}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"location_on"),l.a.createElement("input",{id:"street",type:"text",value:this.state.listing.street,onChange:this.handleChange})),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{id:"property",type:"number",value:this.state.listing.property,onChange:this.handleChange})),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{id:"apartment",type:"number",value:this.state.listing.apartment,onChange:this.handleChange}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"local_atm"),l.a.createElement("input",{id:"price",type:"text",className:"validate",value:this.state.listing.price,onChange:this.handleChange})),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("i",{className:"material-icons prefix"},"line_weight"),l.a.createElement("input",{id:"type",type:"number",value:this.state.listing.type,onChange:this.handleChange}))),l.a.createElement("div",{className:"input-field col s6"},l.a.createElement("i",{className:"material-icons prefix"},"mode_edit"),l.a.createElement("textarea",{id:"description",className:"materialize-textarea",value:this.state.listing.description,onChange:this.handleChange}))),l.a.createElement("div",{className:"card-action center-align red-text"},l.a.createElement(u.b,{onClick:function(){return e.saveChanges(e.state.listing.id,e.state.listing)},className:" btn teal white-text edit-button"},l.a.createElement("i",{className:"material-icons left"},"save"),"Save "),l.a.createElement(u.b,{to:"/",className:"btn amber white-text edit-button"},l.a.createElement("i",{className:"material-icons left"},"cancel"),"Cancel "),l.a.createElement(u.b,{onClick:function(){return e.handleDelete(e.state.homeid)},className:"btn red white-text lighten-2 edit-button"},l.a.createElement("i",{className:"material-icons right"},"delete"),"Delete ")))))):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 m12"},l.a.createElement("div",{className:"spinner-layer spinner-red"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))))}}]),t}(l.a.Component),x=a(12);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateAllData=function(){O.a.get("https://alfa.propertygrouppoland.pl/q/paulinaopacka/getAll").then((function(e){var t=e.data.data,n=a.state;a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n,{listings:t,lastid:t[t.length-1].id}))}))},a.handleCreation=function(e){var t=e;try{fetch("https://alfa.propertygrouppoland.pl/q/paulinaopacka/create",{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)})}catch(l){console.error(l)}var n=a.state.listings;a.setState({listings:[].concat(Object(i.a)(n),[t])})},a.editListing=function(e,t){var n=t,l="https://alfa.propertygrouppoland.pl/q/paulinaopacka/update/".concat(e);try{fetch(l,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(n)}).then((function(){return a.updateAllData()}))}catch(r){console.error(r)}},a.deleteListing=function(e){var t="https://alfa.propertygrouppoland.pl/q/paulinaopacka/delete/".concat(e);try{fetch(t,{method:"DELETE"}).then((function(e){return console.log(e)}))}catch(r){console.error(r)}var n=a.state.listings;console.log("prev state",n);var l=n.filter((function(t){return t.id!==e}));console.log("new state",l),a.setState({listings:l})},a.state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.updateAllData()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(u.a,{basename:"/cruddapp"},l.a.createElement(E,null),l.a.createElement(x.c,null,l.a.createElement(x.a,{exact:!0,path:"/",render:function(t){return l.a.createElement(f,Object.assign({},t,{listings:e.state.listings,lastid:e.state.lastid}))}}),l.a.createElement(x.a,{path:"/create",render:function(t){return l.a.createElement(N,Object.assign({},t,{handleCreation:e.handleCreation,listings:e.state.listings}))}}),l.a.createElement(x.a,{path:"/manage",component:b}),l.a.createElement(x.a,{path:"/edit/:home_id",render:function(t){return l.a.createElement(w,Object.assign({},t,{editListing:e.editListing,deleteListing:e.deleteListing}))}}))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.50cc1838.chunk.js.map